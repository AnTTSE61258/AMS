@using AMS.Service

@{
    ViewBag.Title = "DoSurvey";
    Layout = "~/Views/Home/_socialNetworkLayout.cshtml";
    List<Survey> listSurveys = ViewBag.ListSurvey;
    User currentUser = ViewBag.currentUser;
    House currentHouse = ViewBag.currentHouse;
    List<int> listSurveyId = ViewBag.ListUserAnswer;

    List<UserAnswerSurvey> listUserAnswer = new List<UserAnswerSurvey>();
    UserAnswerService userAnswerService = new UserAnswerService();
    string alerts = ViewBag.alerts;
    <style>
        .button {
            display: block;
            width: 70px;
            height: 35px;
            background: #4E9CAF;
            padding: 7px;
            text-align: center;
            border-radius: 5px;
            color: white;
            font-weight: bold;
        }
        .binh {
            border-color: #1ABC9C;
            box-shadow: none;
        }

        .media-item-ctr-1 {
            border-bottom: 1px solid #e5e3da;
            padding-bottom: 1em;
            margin-top: 1em;
            width: 100%;
            position: relative;
            float: left;
        }

            .media-item-ctr-1 .media-item-thumbnail {
                display: block;
                position: relative;
            }

        .media-ribbon {
            position: absolute;
            top: 15px;
            left: -8px;
            background-color: #ff4500;
            padding: 0 3px;
            font-family: 'Montserrat', sans-serif;
            color: #fff;
            letter-spacing: 1px;
            text-transform: uppercase;
            line-height: 24px;
            font-size: 11px;
        }

        .media-item-ctr-1 .media-item-overview {
            position: relative;
            min-height: 140px;
            padding-bottom: 15px;
        }

            .media-item-ctr-1 .media-item-overview .media-item-cat {
                text-transform: uppercase;
                font-family: 'Montserrat', sans-serif;
                font-size: 12px;
            }

            .media-item-ctr-1 .media-item-overview .media-meta-data {
                margin-top: 10px;
                color: #b5b3ac;
                font-size: 11px;
            }

        .media-item-ctr-1 .social-share-ctr {
            position: absolute;
            right: 10px;
            bottom: 20px;
        }

        .btn-facebook {
            background-color: #395693;
            color: #fff;
        }

        .btn-twitter {
            background-color: #00acee;
            color: #fff;
        }
    </style>
}
<script src="~/Scripts/jquery-1.10.2.js"></script>
<body onload="paging()">

    <div class="col-sm-offset-1 col-md-8">
        @{
            if (alerts != null)
            {
                <div class="form-group">
                    <label for="inputEmail3" class="col-sm-3 control-label"></label>
                    <div class="col-sm-7" id="label1">
                        @*<div class="alert alert-success" style="width: 330px">
                                <strong><span class="label date-color label-gray center">Tao thanh cong</span></strong>
                            </div>*@
                        <div class="isa_success" style="width: 330px">
                            <i class="fa fa-check"></i>
                            @alerts
                        </div>
                    </div>

                </div><br>
            }
            foreach (var item in listSurveys)
            {
                listUserAnswer = (userAnswerService.GetListUserAnswerSurveysBySurveyId(item.Id));
                int k = 0;



                if (listSurveys.Count != 0)
                {
                    if (item.Member == currentUser.RoleId && item.Block == "NULL" && item.Floor == "NULL")
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
                                        }

                                    </div>
                                </div>
                            </fieldset>

                        }
                    }
                    if (item.Block == currentHouse.Block && item.Floor == currentHouse.Floor && item.Member == currentUser.RoleId)
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
                                        }

                                    </div>
                                </div>
                            </fieldset>

                        }
                    }
                    if (item.Member == 6 && item.Block == currentHouse.Block && item.Floor == "NULL")
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
                                        }

                                    </div>
                                </div>
                            </fieldset>

                        }
                    }
                    if (item.Member == 6 && item.Block == "NULL" && item.Floor == "NULL")
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
                                        }

                                    </div>
                                </div>
                            </fieldset>
                        }
                    }
                    if (item.Member == 6 && item.Block == "NULL" && item.Floor == currentHouse.Floor)
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
                                        }

                                    </div>
                                </div>
                            </fieldset>

                        }

                    }
                    if (item.Block == null && item.Floor == currentHouse.Floor && item.Member == currentUser.RoleId)
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
                                        }

                                    </div>
                                </div>
                            </fieldset>

                        }
                    }
                    if (item.Block == currentHouse.Block && item.Floor == "NULL" && item.Member == currentUser.RoleId)
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
                                        }

                                    </div>
                                </div>
                            </fieldset>

                        }
                    }
                    if (item.Block == currentHouse.Block && item.Floor == currentHouse.Floor && item.Member == 6)
                    {
                        foreach (var VARIABLE in listUserAnswer)
                        {


                            if (VARIABLE.UserId == currentUser.Id)
                            {
                                k++;
                            }

                        }
                        if (k != 1)
                        {
                            <fieldset class="scheduler-border less-padding aass">
                                <div class="media-item-ctr-1">
                                    <div class="col-xs-5 col-sm-3">
                                        <a class="media-item-thumbnail" href="http://rocketeer.jaskokoyn.cc/poll/which-contestant-should-ben-higgins-pick-on-the-bachelor-131">
                                            <img class="img-responsive" src="~/images/Post/survey-icon.png">
                                            <div class="media-ribbon">
                                                <i class="fa fa-heart"></i> @item.Id
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-xs-7 col-sm-9 media-item-overview">

                                        <h3>
                                            <a href="@Url.Action("DoDetailSurvey", "Survey", new { surveyId = @item.Id })">@item.Question</a>
                                        </h3>
                                        <p>@item.Title</p>
                                        <div class="media-meta-data">
                                            <a href="~/images/Post/default-profile.png">Admin</a> -  @Convert.ToString(string.Format("{0:MM/dd/yyyy}", item.StartDate))
                                        </div>
                                    </div>
                                    <div class="social-share-ctr hidden-xs">
                                        @{
                            if (item.Priority == 1)
                            {
                                <h3> <span class="label label-warning">Cần Làm</span></h3>

                            }
}

                                    </div>
                                </div>
                            </fieldset>

                        }
                    }
                }

                else if (listSurveys.Count == 0)
                {

                }
            }

        }



        <div class="w100 categoryFooter">

            <ul class="pagination" id="paginations">

                <li class="current"><a href="#">1</a></li>
                <li> <a href="#">2</a></li>
                <li> <a href="#">3</a></li>
                <li> <a href="#">4</a></li>
                <li> <a href="#">5</a></li>

            </ul>

        </div>








    </div>
</body>
<script>
    pageSize = 5;
    $('#label1').delay(2500).fadeOut('slow');
    showPage = function (page) {
        $(".content").hide();
        $(".content").each(function (n) {
            if (n >= pageSize * (page - 1) && n < pageSize * page)
                $(this).show();
        });
    }

    showPage(1);

    $("#pagin li a").click(function () {
        $("#pagin li a").removeClass("current");
        $(this).addClass("current");
        showPage(parseInt($(this).text()))
    });


    function paging() {
        var pageSize = 5;

        var showPage = function (page) {
            $(".aass").hide();
            $(".aass").each(function (n) {
                if (n >= pageSize * (page - 1) && n < pageSize * page)
                    $(this).show();
            });
        }

        showPage(1);


        $("#paginations li a").click(function () {
            $("#paginations li a").removeClass("current");
            $(this).addClass("current");
            showPage(parseInt($(this).text()))
        });
    }
</script>

